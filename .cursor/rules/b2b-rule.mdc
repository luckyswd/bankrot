---
alwaysApply: true
---

ДЛЯ /backend
Общее:
Используется PHP 8.4 и Symfony 6.4.
Соблюдай стандарт PSR-12.
Не используй устаревшие функции и синтаксис, несовместимые с PHP 8+.
Код должен быть максимально читаемым, оптимизированым и самодокументируемым.

Стиль кода:
Всегда добавляй пустую строку перед return.
Используй именованные аргументы при вызове всех функций и методов.
Указывай типы аргументов и возвращаемых значений.
Используй константы классов вместо "магических" строк и чисел.
Для коллекций применяй typed properties (array<int, string> и т.п.) или DTO.
Не оставляй закомментированный код.
Следи за однородностью отступов и переносов (4 пробела, LF).

Symfony-специфика:
Для зависимостей используй автовнедрение через конструктор (DI).
Не обращайся к контейнеру напрямую ($this->container->get() запрещено).
Контроллеры должны быть тонкими — бизнес-логика выносится в сервисы.
Все публичные сервисы и команды должны иметь строгие сигнатуры.
Для конфигураций — использовать PHP Config вместо YAML, если возможно.

Комментарии и документация:
Добавляй PHPDoc к каждому публичному методу и свойству, если тип не очевиден.
Не дублируй описание, уже понятное из имени переменной или типа.

Архитектура:
Придерживайся принципов SOLID.
Разделяй доменную, прикладную и инфраструктурную логику.
Исключения должны быть осмысленными и типизированными (DomainException, ApplicationException и т.д.).

В конце когда закончил, в контейнере bankruptcy-php выполняй команды make stan, make lint, make test. Если есть ошибки, исправляй.

